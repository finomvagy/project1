<%- include("head", { pageName: typeof pageName !== 'undefined' ? pageName : "Categories" }) -%>
<h2>Categories</h2>
<% if (typeof msg != "undefined" && msg) { %><p class="msg info-msg"><%= msg %></p><% } %>
<ul class="category-list">
  <% if (locals.categories && categories.length > 0) { %>
    <% for (const category of categories) { %>
    <li>
      <a href="/books/category/<%= category.id %>"><%= category.name %></a>
      <% if (user) { %>
        <span class="actions">
          (<a href="/editcategory/<%= category.id %>">Edit</a>
          | <a href="/deletecategory/<%= category.id %>" onclick="return confirm('Are you sure you want to delete this category? This will not delete books but will remove them from this category.');">Delete</a>)
        </span>
      <% } %>
    </li>
    <% } %>
  <% } else { %>
    <li>No categories found. <a href="/newcategory">Add one?</a></li>
  <% } %>
</ul>
<%- include("foot") -%>